# ドメインモデル

## 概要

このプロジェクトは、ESP32を搭載した模型列車（タケレール）を、ESP-NOWプロトコルを介して無線で制御するためのソフトウェアです。列車はモーター、ライト、ブザーを備えており、コントローラーからの指示に応じてこれらのコンポーネントを操作します。また、自身のバッテリー電圧を監視し、コントローラーに送信する機能も持ちます。

## 主要な概念

### 1. 列車 (Train)

- **説明:** システムの中心となるエンティティです。物理的な模型列車を表します。
- **責務:**
    - モーターを制御して前進、後進、停止する。
    - ライトを点灯、消灯する。
    - ブザーを鳴らす、止める。
    - バッテリー電圧を監視する。
- **関連クラス:** `Train`, `TrainController`

### 2. コントローラー (Controller)

- **説明:** 列車に指示を出すための操作デバイスです。このプロジェクトのコードベースは列車側（受信側）ですが、コントローラーの存在が前提となっています。
- **責務:**
    - ユーザーの操作（スライダーやスイッチ）を検知する。
    - 操作内容をコマンドデータとして列車に送信する。
    - 列車から送信されたテレメトリ（バッテリー電圧など）を受信・表示する。

### 3. ESP-NOW通信 (ESP-NOW Communication)

- **説明:** ESP32デバイス間で利用される、低遅延の無線通信プロトコルです。コントローラーと列車間の通信に使用されます。
- **責務:**
    - デバイス間のペアリングを確立する。
    - コマンドやテレメトリのデータパケットを送受信する。
- **関連クラス:** `ESPNowManager`

### 4. コマンド (Command)

- **説明:** コントローラーから列車へ送信される指示データです。
- **内容:**
    - モーターの速度と方向
    - ライトのON/OFF
    - ブザーのON/OFF
- **関連構造体:** `ReceivedDataPacket`

### 5. テレメトリ (Telemetry)

- **説明:** 列車からコントローラーへ送信される状態データです。
- **内容:**
    - バッテリー電圧
    - （将来的に）その他のセンサー情報
- **関連構造体:** `SaneDataPacket`
